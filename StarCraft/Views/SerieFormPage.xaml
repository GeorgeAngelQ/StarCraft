<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:sys="clr-namespace:System;assembly=netstandard"
             x:Class="StarCraft.Views.SerieFormPage"
             Title="Registrar Serie"
             BackgroundColor="#0F0F0F">

    <ScrollView>
        <Grid Padding="20" RowSpacing="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- ENCABEZADO -->
            <Frame Grid.Row="0"
                   BackgroundColor="#1A1A1D"
                   BorderColor="#2D2D30"
                   CornerRadius="12"
                   HasShadow="True"
                   Padding="20">
                <HorizontalStackLayout Spacing="10" HorizontalOptions="Center">
                    <Label Text="🎯" FontSize="32" VerticalOptions="Center" />
                    <Label x:Name="LblTitulo"
                           Text="Nueva Serie" 
                           FontSize="26" 
                           FontAttributes="Bold"
                           TextColor="#6C63FF"
                           VerticalOptions="Center" />
                </HorizontalStackLayout>
            </Frame>

            <!-- FORMULARIO -->
            <Frame Grid.Row="1"
                   BackgroundColor="#1A1A1D"
                   BorderColor="#2D2D30"
                   CornerRadius="12"
                   HasShadow="True"
                   Padding="20">
                <VerticalStackLayout Spacing="20">

                    <!-- Modalidad y Fecha -->
                    <Grid ColumnSpacing="15" RowSpacing="20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!-- Columna 1: Modalidad Picker -->
                        <VerticalStackLayout Grid.Column="0" Grid.Row="0" Spacing="8">
                            <Label Text="🏆 Modalidad Existente" 
                                   FontAttributes="Bold"
                                   TextColor="#E0E0E0"
                                   FontSize="15" />
                            <Frame BackgroundColor="#252529"
                                   BorderColor="#6C63FF"
                                   CornerRadius="8"
                                   Padding="0"
                                   HasShadow="False">
                                <Picker x:Name="ModalidadPicker"
                                        TextColor="#FFFFFF"
                                        TitleColor="#808080"
                                        BackgroundColor="Transparent"
                                        FontSize="15"
                                        SelectedIndexChanged="ModalidadPicker_SelectedIndexChanged"/>
                            </Frame>
                        </VerticalStackLayout>

                        <!-- Columna 2: Fecha -->
                        <VerticalStackLayout Grid.Column="1" Grid.Row="0" Spacing="8">
                            <Label Text="📅 Fecha de la Serie" 
                                   FontAttributes="Bold"
                                   TextColor="#E0E0E0"
                                   FontSize="15" />
                            <Frame BackgroundColor="#252529"
                                   BorderColor="#3E3E42"
                                   CornerRadius="8"
                                   Padding="8,4"
                                   HasShadow="False">
                                <DatePicker x:Name="FechaPicker"
                                           Date="{x:Static sys:DateTime.Now}"
                                           TextColor="#FFFFFF"
                                           FontSize="15"
                                           BackgroundColor="Transparent"/>
                            </Frame>
                        </VerticalStackLayout>

                        <!-- Modalidad Entry (personalizada) - Segunda fila, columna completa -->
                        <VerticalStackLayout Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1" Spacing="8">
                            <Label Text="✏️ Nueva Modalidad" 
                                   FontAttributes="Bold"
                                   TextColor="#E0E0E0"
                                   FontSize="15" />
                            <Frame BackgroundColor="#252529"
                                   BorderColor="#3E3E42"
                                   CornerRadius="8"
                                   Padding="12,8"
                                   HasShadow="False">
                                <Entry x:Name="ModalidadEntry"
                                       Placeholder="Ej: Bo17"
                                       PlaceholderColor="#808080"
                                       TextColor="#FFFFFF"
                                       BackgroundColor="Transparent"
                                       TextChanged="ModalidadEntry_TextChanged"
                                       Unfocused="ModalidadEntry_Unfocused"
                                       Completed="Campo_Completed"/>
                            </Frame>
                        </VerticalStackLayout>
                    </Grid>

                    <!-- Separador visual -->
                    <BoxView HeightRequest="1" 
                             BackgroundColor="#3E3E42"
                             Margin="0,5"/>

                    <!-- Título de jugadores -->
                    <Label Text="⚔️ Enfrentamiento" 
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="#6C63FF"
                           HorizontalOptions="Center"/>

                    <!-- Jugadores en Grid -->
                    <Grid ColumnSpacing="20" RowSpacing="15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!-- Jugador 1 -->
                        <VerticalStackLayout Grid.Column="0" Spacing="8">
                            <Label Text="👤 Jugador 1" 
                                   FontAttributes="Bold"
                                   TextColor="#E0E0E0"
                                   FontSize="15"
                                   HorizontalOptions="Center"/>
                            <Frame BackgroundColor="#252529"
                                   BorderColor="#6C63FF"
                                   CornerRadius="8"
                                   Padding="0"
                                   HasShadow="False">
                                <Picker x:Name="Jugador1Picker"
                                        TextColor="#FFFFFF"
                                        TitleColor="#808080"
                                        BackgroundColor="Transparent"
                                        FontSize="15"/>
                            </Frame>
                        </VerticalStackLayout>

                        <!-- VS -->
                        <Label Grid.Column="1"
                               Text="VS"
                               FontSize="22"
                               FontAttributes="Bold"
                               TextColor="#FF6B6B"
                               VerticalOptions="Center"
                               Margin="0,25,0,0"/>

                        <!-- Jugador 2 -->
                        <VerticalStackLayout Grid.Column="2" Spacing="8">
                            <Label Text="👤 Jugador 2" 
                                   FontAttributes="Bold"
                                   TextColor="#E0E0E0"
                                   FontSize="15"
                                   HorizontalOptions="Center"/>
                            <Frame BackgroundColor="#252529"
                                   BorderColor="#6C63FF"
                                   CornerRadius="8"
                                   Padding="0"
                                   HasShadow="False">
                                <Picker x:Name="Jugador2Picker"
                                        TextColor="#FFFFFF"
                                        TitleColor="#808080"
                                        BackgroundColor="Transparent"
                                        FontSize="15"/>
                            </Frame>
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- BOTONES DE ACCIÓN -->
            <Frame Grid.Row="2"
                   BackgroundColor="#1A1A1D"
                   BorderColor="#2D2D30"
                   CornerRadius="12"
                   HasShadow="True"
                   Padding="20">
                <Grid ColumnSpacing="15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <!-- Botón Guardar -->
                    <Button Grid.Column="0"
                            x:Name="BtnGuardar"
                            Text="💾 GUARDAR SERIE"
                            BackgroundColor="#6C63FF"
                            TextColor="White"
                            FontAttributes="Bold"
                            FontSize="16"
                            CornerRadius="8"
                            HeightRequest="55"
                            Clicked="OnGuardarClicked">
                        <Button.Shadow>
                            <Shadow Brush="#6C63FF" Opacity="0.5" Radius="15" Offset="0,5" />
                        </Button.Shadow>
                    </Button>

                    <!-- Botón Eliminar -->
                    <Button Grid.Column="1"
                            x:Name="BtnEliminar"
                            Text="🗑️ ELIMINAR SERIE"
                            BackgroundColor="#FF6B6B"
                            TextColor="White"
                            FontAttributes="Bold"
                            FontSize="16"
                            CornerRadius="8"
                            HeightRequest="55"
                            IsVisible="False"
                            Clicked="OnEliminarClicked">
                        <Button.Shadow>
                            <Shadow Brush="#FF6B6B" Opacity="0.5" Radius="15" Offset="0,5" />
                        </Button.Shadow>
                    </Button>
                </Grid>
            </Frame>
        </Grid>
    </ScrollView>
</ContentPage>